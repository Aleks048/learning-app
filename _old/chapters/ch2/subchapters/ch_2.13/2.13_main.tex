\documentclass{article}
\usepackage{import}

\ExplSyntaxOn

\NewDocumentCommand{\getenv}{om}
{
    \sys_get_shell:nnN { kpsewhich ~ --var-value ~ #2 } { } \l_tmpa_tl
    \tl_trim_spaces:N \l_tmpa_tl
    \IfNoValueTF { #1 }
    {
        \tl_use:N \l_tmpa_tl
    }
    {
        \tl_set_eq:NN #1 \l_tmpa_tl
    }
}

\ExplSyntaxOff
\getenv[\utPath]{BOOKS_PROCESS_TEX_PATH}

\input{{\utPath}start.tex}

\def\currch{ch2}
\def\currImagesPath{../../ch2_images/}

\graphicspath{ {\currImagesPath} }
\title{\currfilebase}
\begin{document}

    %show proofs or not
    \newif\ifproofs
    \proofstrue

    \input{{\utPath}newCommands.tex}

    \newcommand{\TOC}{
        % BEFORE_LOCAL_LINKS_MARKER
        [
        \href{file:/Users/ashum048/books//b_analysis_test/ch2/ch2_images/5_2.14_sd.sh}{sd},
        \href{file:/Users/ashum048/books//b_analysis_test/ch2/ch2_images/6_2.14_sd.sh}{sd},
        \href{file:/Users/ashum048/books//b_analysis_test/ch2/ch2_images/7_2.13_sd.sh}{sd},
        \href{file:/Users/ashum048/books//b_analysis_test/ch2/ch2_images/11_2.13_asda.sh}{asda},
        ]
        
        \hyperlink{top}{\textbf{\\\\\\TOC: METRIC SPACES\\}}
        \input{../TOC_ch2.tex}
        % BEFORE_TOC_MARKER
        
        \mybox{
            \link[1]{3.52} \textbf{Def:} rearrangement
        }
        \mybox{
            \link[2]{3.53} \textbf{Example}
            \\\\\link[3]{3.54} \image[0.5]{3_3.54_thm}
        }
        \mybox{
            \link[4]{3.55} \image[0.5]{4_3.55_thm}
        }
        % THIS IS CONTENT id: 5 
        \mybox{
            \link[5]{sd} \textbf{!}
        }
        
        
        % THIS IS CONTENT id: 6 
        \mybox{
            \link[6]{sd} \textbf{!}
        }
        
        
    % AFTER_TOC_MARKER
    }

% BEFORE_PIC_MARKER


% THIS IS CONTENT id: 5 
    % \proofsflse
    \def\imnum{5}
    \def\imname{sd}
    \def\linkname{sd}
    \def\imsubchapter{2.14}
    \hyperdef{TOC}{\linkname}{}
    \myTarget{\imnum}{\imname}{\linkname\imnum}{\imsubchapter}
    %     \addProofs{1}
    % \myStIm{2}
    \\\rule{\textwidth}{0.4pt}    \\\myGlLinks{
        % \myGlLink{}{}
    }
    \\Local links: \printList{test\imnum}
    \TOC\newpage


% THIS IS CONTENT id: 6 
    % \proofsflse
    \def\imnum{6}
    \def\imname{sd}
    \def\linkname{sd}
    \def\imsubchapter{2.14}
    \hyperdef{TOC}{\linkname}{}
    \myTarget{\imnum}{\imname}{\linkname\imnum}{\imsubchapter}
    %     \addProofs{1}
    % \myStIm{2}
    \\\rule{\textwidth}{0.4pt}    \\\myGlLinks{
        % \myGlLink{}{}
    }
    \\Local links: \printList{test\imnum}
    \TOC\newpage


% THIS IS CONTENT id: 7 
    % \proofsflse
    \def\imnum{7}
    \def\imname{sd}
    \def\linkname{sd}
    \def\imsubchapter{2.13}
    \hyperdef{TOC}{\linkname}{}
    \myTarget{\imnum}{\imname}{\linkname\imnum}{\imsubchapter}
    %     \addProofs{1}
    % \myStIm{2}
    \\\rule{\textwidth}{0.4pt}    \\\myGlLinks{
        % \myGlLink{}{}
    }
    \\Local links: \printList{test\imnum}
    \TOC\newpage


% THIS IS CONTENT id: 11 
    % \proofsflse
    \def\imnum{11}
    \def\imname{asda}
    \def\linkname{asda}
    \def\imsubchapter{2.13}
    \hyperdef{TOC}{\linkname}{}
    \myTarget{\imnum}{\imname}{\linkname\imnum}{\imsubchapter}
    %     \addProofs{1}
    % \myStIm{2}
    \\\rule{\textwidth}{0.4pt}    \\\myGlLinks{
        % \myGlLink{}{}
    }
    \\Local links: \printList{test\imnum}
    \TOC\newpage


% AFTER_PIC_MARKER
\input{{\utPath}end.tex}
\end{document}
